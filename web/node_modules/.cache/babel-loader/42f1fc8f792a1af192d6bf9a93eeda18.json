{"remainingRequest":"C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\src\\store\\modules\\auth.js","mtime":1553611652008},{"path":"C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1553611641452},{"path":"C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":1553611641170},{"path":"C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\node_modules\\eslint-loader\\index.js","mtime":1553611643751}],"contextDependencies":[],"result":["import _defineProperty from \"C:\\\\Users\\\\venno\\\\IdeaProjects\\\\Tarkvaratehnika1\\\\web\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport _Promise from \"C:\\\\Users\\\\venno\\\\IdeaProjects\\\\Tarkvaratehnika1\\\\web\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\n\nvar _actions, _mutations;\n\nimport { AUTH_LOGOUT, AUTH_REQUEST } from \"../constants\";\nimport axios from \"axios\";\nvar state = {\n  token: localStorage.getItem('token') || ''\n};\nvar getters = {\n  isAuthenticated: function isAuthenticated(state) {\n    return !!state.token;\n  }\n};\nvar actions = (_actions = {}, _defineProperty(_actions, AUTH_REQUEST, function (_ref, user) {\n  var commit = _ref.commit,\n      dispatch = _ref.dispatch;\n  return new _Promise(function (resolve, reject) {\n    commit(AUTH_REQUEST, user);\n    resolve();\n  });\n}), _defineProperty(_actions, AUTH_LOGOUT, function (_ref2) {\n  var commit = _ref2.commit,\n      dispatch = _ref2.dispatch;\n  return new _Promise(function (resolve, reject) {\n    commit(AUTH_LOGOUT);\n    resolve();\n  });\n}), _actions);\nvar mutations = (_mutations = {}, _defineProperty(_mutations, AUTH_REQUEST, function (state, user) {\n  var params = new URLSearchParams();\n  params.append('grant_type', 'password');\n  params.append('username', user.username);\n  params.append('password', user.password);\n  axios({\n    method: 'post',\n    url: 'http://localhost:8080/oauth/token',\n    auth: {\n      username: 'my-trusted-client',\n      password: 'secret'\n    },\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded; charset=utf-8\"\n    },\n    data: params\n  }).then(function (response) {\n    console.log(response.data.access_token);\n    console.log(response.data);\n    localStorage.setItem('token', response.data.access_token);\n    localStorage.setItem('username', user.username);\n  });\n}), _defineProperty(_mutations, AUTH_LOGOUT, function () {\n  axios.get('http://localhost:8080/logout/' + localStorage.getItem('token')).then(function (response) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n  });\n}), _mutations);\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["C:\\Users\\venno\\IdeaProjects\\Tarkvaratehnika1\\web\\src\\store\\modules\\auth.js"],"names":["AUTH_LOGOUT","AUTH_REQUEST","axios","state","token","localStorage","getItem","getters","isAuthenticated","actions","user","commit","dispatch","resolve","reject","mutations","params","URLSearchParams","append","username","password","method","url","auth","headers","data","then","response","console","log","access_token","setItem","get","removeItem"],"mappings":";;;;;AAAA,SAAQA,WAAR,EAAqBC,YAArB,QAAwC,cAAxC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,KAAK,GAAG;AAAEC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC;AAA1C,CAAd;AAEA,IAAMC,OAAO,GAAG;AACZC,EAAAA,eAAe,EAAE,yBAAAL,KAAK;AAAA,WAAI,CAAC,CAACA,KAAK,CAACC,KAAZ;AAAA;AADV,CAAhB;AAIA,IAAMK,OAAO,6CACRR,YADQ,EACO,gBAAqBS,IAArB,EAA8B;AAAA,MAA5BC,MAA4B,QAA5BA,MAA4B;AAAA,MAApBC,QAAoB,QAApBA,QAAoB;AAC1C,SAAO,aAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCH,IAAAA,MAAM,CAACV,YAAD,EAAeS,IAAf,CAAN;AACAG,IAAAA,OAAO;AACV,GAHM,CAAP;AAIH,CANQ,6BAORb,WAPQ,EAOM,iBAAwB;AAAA,MAAtBW,MAAsB,SAAtBA,MAAsB;AAAA,MAAdC,QAAc,SAAdA,QAAc;AACnC,SAAO,aAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCH,IAAAA,MAAM,CAACX,WAAD,CAAN;AACAa,IAAAA,OAAO;AACV,GAHM,CAAP;AAIH,CAZQ,YAAb;AAeA,IAAME,SAAS,iDACVd,YADU,EACK,UAACE,KAAD,EAAQO,IAAR,EAAiB;AAC7B,MAAMM,MAAM,GAAG,IAAIC,eAAJ,EAAf;AACAD,EAAAA,MAAM,CAACE,MAAP,CAAc,YAAd,EAA4B,UAA5B;AACAF,EAAAA,MAAM,CAACE,MAAP,CAAc,UAAd,EAA0BR,IAAI,CAACS,QAA/B;AACAH,EAAAA,MAAM,CAACE,MAAP,CAAc,UAAd,EAAyBR,IAAI,CAACU,QAA9B;AACAlB,EAAAA,KAAK,CAAC;AACFmB,IAAAA,MAAM,EAAE,MADN;AAEFC,IAAAA,GAAG,EAAE,mCAFH;AAGFC,IAAAA,IAAI,EAAE;AAACJ,MAAAA,QAAQ,EAAE,mBAAX;AAAgCC,MAAAA,QAAQ,EAAE;AAA1C,KAHJ;AAIFI,IAAAA,OAAO,EAAE;AAAC,sBAAgB;AAAjB,KAJP;AAKFC,IAAAA,IAAI,EAAET;AALJ,GAAD,CAAL,CAMGU,IANH,CAMQ,UAAAC,QAAQ,EAAI;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACF,IAAT,CAAcK,YAA1B;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACF,IAArB;AACApB,IAAAA,YAAY,CAAC0B,OAAb,CAAqB,OAArB,EAA8BJ,QAAQ,CAACF,IAAT,CAAcK,YAA5C;AACAzB,IAAAA,YAAY,CAAC0B,OAAb,CAAqB,UAArB,EAAiCrB,IAAI,CAACS,QAAtC;AACH,GAXD;AAYH,CAlBU,+BAoBVnB,WApBU,EAoBI,YAAM;AACjBE,EAAAA,KAAK,CAAC8B,GAAN,CAAU,kCAAgC3B,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA1C,EAAyEoB,IAAzE,CAA8E,UAAAC,QAAQ,EAAI;AACtFtB,IAAAA,YAAY,CAAC4B,UAAb,CAAwB,OAAxB;AACA5B,IAAAA,YAAY,CAAC4B,UAAb,CAAwB,UAAxB;AACH,GAHD;AAIH,CAzBU,cAAf;AA4BA,eAAe;AACX9B,EAAAA,KAAK,EAALA,KADW;AAEXI,EAAAA,OAAO,EAAPA,OAFW;AAGXE,EAAAA,OAAO,EAAPA,OAHW;AAIXM,EAAAA,SAAS,EAATA;AAJW,CAAf","sourcesContent":["import {AUTH_LOGOUT, AUTH_REQUEST} from \"../constants\";\r\nimport axios from \"axios\";\r\n\r\nconst state = { token: localStorage.getItem('token') || '' };\r\n\r\nconst getters = {\r\n    isAuthenticated: state => !!state.token\r\n};\r\n\r\nconst actions = {\r\n    [AUTH_REQUEST]: ({commit, dispatch}, user) => {\r\n        return new Promise((resolve, reject) => {\r\n            commit(AUTH_REQUEST, user);\r\n            resolve()\r\n        })\r\n    },\r\n    [AUTH_LOGOUT]: ({commit, dispatch}) => {\r\n        return new Promise((resolve, reject) => {\r\n            commit(AUTH_LOGOUT);\r\n            resolve()\r\n        })\r\n    }\r\n};\r\n\r\nconst mutations = {\r\n    [AUTH_REQUEST]: (state, user) => {\r\n        const params = new URLSearchParams();\r\n        params.append('grant_type', 'password');\r\n        params.append('username', user.username);\r\n        params.append('password',user.password);\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://localhost:8080/oauth/token',\r\n            auth: {username: 'my-trusted-client', password: 'secret'},\r\n            headers: {\"Content-type\": \"application/x-www-form-urlencoded; charset=utf-8\"},\r\n            data: params\r\n        }).then(response => {\r\n            console.log(response.data.access_token);\r\n            console.log(response.data);\r\n            localStorage.setItem('token', response.data.access_token);\r\n            localStorage.setItem('username', user.username);\r\n        });\r\n    },\r\n\r\n    [AUTH_LOGOUT]: () => {\r\n        axios.get('http://localhost:8080/logout/'+localStorage.getItem('token')).then(response => {\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('username');\r\n        });\r\n    }\r\n};\r\n\r\nexport default {\r\n    state,\r\n    getters,\r\n    actions,\r\n    mutations,\r\n}"]}]}